# Conceptos fundamentales de NoSQL y MongoDB

- MongoDB es una base de datos documental}
  
Para modelar de una forma correcta es importante tener claro los siguientes conceptos:

-** Los datos son almacenados en documentos legibles**, los documentos se almacenan en formato JSON (JavaScript Object Notation),
  en donde los datos se almacenan en pares clave-valor. Sin embargo, el formato JSON es usado solo para el formato de lectura
  ya que internamente o en el proceso de escritura, MongoDB utiliza el formato BSON que es un formato binario que proporciona mayor rendimiento.
- **Los documentos son almacenados en colecciones**, lo cual nos indica que en esa colecci√≥n se guardan documentos que comparten informaci√≥n.
  Las colecciones pueden ser: Usuarios, Productos, Categor√≠as, etc.
- **El Diagrama ER (Entidad Relaci√≥n), es un diagrama que nos permite modelar y visualizar nuestros datos**, adem√°s de
  conocer como est√°n relacionadas nuestras entidades. La entidad no son mas que las colecciones previamente definidas y
  la relaci√≥n son lineas que unen estas entidades para indicar como √©stas interact√∫an entre s√≠.

# Metodolog√≠a para el modelamiento de datos

Uno de los aspectos mas importantes a tener en cuenta al momento de modelar los datos son las restricciones que se
tienen en los distintos ambientes ya que estas condicionan los recursos que tenemos disponibles.

## Restricciones

- Cantidad de memoria RAM ‚Üí a mayor cantidad de RAM, mayores son los costos
- En donde se almacena la informaci√≥n
- - a. Disco mec√°nico ‚Üí Son ideales para almacenar informaci√≥n a trav√©s del tiempo (hist√≥ricos de datos)
- - b. Disco de estado solido ‚Üí Son ideales para informaci√≥n de consultas r√°pidas.
- - c. RAM ‚Üí Son ideales para consultas mucho mas r√°pidas que en un disco de estado de solido pero aumenta los costos si guardamos mucha informaci√≥n.
- **Cada documento en MongoDB puede tener un peso m√°ximo de 16MB.**
- Latencia ‚Üí En donde est√° ubicado el usuario y cuanto le cuesta llegar al servidor que provee la informaci√≥n.
  A esto se le conoce como un CDN (Content Delivery Network) que se encarga de generar una copia de la base de datos
  a trav√©s de un cluster y ver de forma m√°s r√°pida hacia donde nos conectamos para que el usuario tenga la informaci√≥n
  m√°s r√°pida posible. Estas replicas pueden llevarse a cabo haciendo uso de Mongo Atlas.
- Restricciones del negocio.

**Para tener todos estos aspectos en cuenta usaremos una metodolog√≠a de tres fases**

## Metodolog√≠a

1. Requerimientos ‚Üí Escenarios de nuestro sistema y como modelarlo.
2. Identificar ER
3. Aplicar patrones ‚Üí Consultas con mejor rendimiento y pensadas para determinados escenarios.

Cada una de estas fases tendr√°n ciertos aspectos que debemos evaluar los cuales se explican a continuaci√≥n:

- **Escenarios:** Los distintos escenarios que se van a presentar con respecto a nuestro modelo de negocio
  (Como un usuario usar√° la app, donde podr√° editar sus mensajes o como comprar√° un producto)
- **Expertos:** Incluir expertos relacionados con el tema del negocio que se est√° construyendo
  (Si se est√° construyendo un E-Commerce, entonces necesitamos a alguien experto en el area)
- **Sistema Actual:** Saber como funciona el sistema actual (si existe). Si el sistema no existe se debe evaluar
  como gestionan y llevan a cabo las tareas en el presente.
- **DB Admin:** El experto en modelado que une todas las caracter√≠sticas para llegar a un resultado.

Ahora, hablemos de los resultados que vamos a obtener

- **Workload (carga de trabajo):** Es un documento final que se construye gracias a los **Escenarios, Expertos y el Sistema Actual**.
  Este documento nos permite identificar relaciones, operaciones mas comunes, tama√±o de los datos, consultas e indices y plantear
  hip√≥tesis sobre posibles escenarios.
- **Relaciones:** Las podemos obtener juntando el **Sistema Actual y al DB Admin**. En este punto podremos identificar las entidades,
  las relaciones, los atributos, las distintas restricciones y decidir si embeber o referenciar.
- **Patrones:** Con el modelo ER ya podremos identificar patrones en el modelo de negocio que nos permiten realizar optimizaciones
  de la carga de trabajo u obtener un mejor desempe√±o de la misma.

**El resultado final de estos 3 aspectos nos generan a un Dise√±o**

En el WORkLOAD: Podemos identificar el tama√±o de los datos. Consultas e indicies. Operaciones importantes. Suposiciones.

En RELACIONES: Podemos Identificar entidades. Identificar atributos. Identificar relaciones. Embeber vs referenciar.

En PATRONES: Podemos Identificiar y aplicar patrones para que nuestro sistema trabaje mejor.


# [Workload](https://drive.google.com/file/d/1vjUfujfZNQWKqbymEYwRLbHSgoHTVvKI/view)

El Workload o Carga de trabajo se construye tomando en cuenta los Escenarios, los Expertos y el Sistema Actual y
nos permite identificar que cosas tenemos y como se comportan para as√≠ empezar a tomar decisiones a nivel de
dise√±o en nuestra base de datos.

Para construir el Workload podemos usar un documento (no limitativo) que nos permita empezar a definir el modelado
y saber que aspectos debemos tener en cuenta al momento de dise√±ar la base de datos. El documento puede tener las 
siguientes secciones:

- **Casos de usos:** Describimos lo mas importante acerca del caso de negocio que se est√© manejando.
- **Secci√≥n principal:** Se resaltan los actores principales.
- **Suposiciones acerca del negocio:** Establecemos ciertas declaraciones que pueden ir variando a trav√©s del tiempo.
- **Operaciones:** Se detallan mas a fondo los actores que influyen en nuestro negocio y la forma en la que se relacionan
  con nuestra base de datos **resaltando aspectos importantes como: frecuencia, informaci√≥n que se env√≠a, tipo de operaci√≥n, etc.**
- **Entidades:** Creamos ciertas entidades que existen en nuestro negocio, as√≠ como suponer ciertas cosas sobre ellas gracias a la
  informaci√≥n suministrada por los expertos en el area.
- **Observaciones finales:** Pueden ser acotaciones generales con respecto a la informaci√≥n recolectada.


**üìå Mongo Atlas posee un sistema de replicaci√≥n y cuando escribimos en una base de datos puede existir un delay mientras se replica la informaci√≥n en otros nodos.**
